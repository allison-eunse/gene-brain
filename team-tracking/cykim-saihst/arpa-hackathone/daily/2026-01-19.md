# Daily Log - 2025-01-19

## What I did
- `data_align.ipynb`: cognitive meta data align (covariate matching merge) 수행. 두 CSV 파일(UKB_phenotype_gps_fluidint.csv, ukb_cog_decline_cov_master.csv)을 공변량(sex, age, BMI) 기준으로 매칭하여 병합 (eid 셔플 이슈로 공변량 매칭 방식 사용)
- `generate_dataset.py`를 회귀용으로 수정: case/ctrl 구분 제거, `cog_decline_DIFF_composite`를 label로 사용하도록 변경. 파일명 패턴 유연하게 처리하고 하위 디렉토리 재귀 검색 추가
- `generate_all.sh`에 phenotype 파일 인자 전달하도록 업데이트하여 regression 활용 형태로 수정

## Blockers
- 로컬 Mac에 있는 `union_mri_gene_*` 파일이 아직 서버로 전송되지 않음

## Next steps
- gene-only data (12k/16k) parsing: gene-brain 샘플 재정리 후 재진행
- extract embedding (샘플 정리 (라벨링 및 서브젝트) 후 재추출)

## Notes
- 임베딩 추출 파이프라인 코드는 준비되어 있으나, 샘플(합집합/ gene-only) 재정리 완료 후 실행 예정
- 샘플 카운트 요약
  - (CTRL)
    - SMRI: 2,623
    - FMRI: 2,485
    - 공통: 2,477
    - SMRI only: 146
    - FMRI only: 8
    - 합집합(중복 제거): 2,631
  - (CASE)
    - SMRI: 1,832
    - FMRI: 1,736
    - 공통: 1,733
    - SMRI only: 99
    - FMRI only: 3
    - 합집합(중복 제거): 1,835