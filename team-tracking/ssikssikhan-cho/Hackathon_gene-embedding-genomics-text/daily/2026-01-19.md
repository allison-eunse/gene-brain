# Daily Log

## Date
2026-01-19

## Summary
DNA Foundation Model 기반 유전자 임베딩 추출 파이프라인 구축 및 중앙 tracking hub 연동 완료. 5종 모델(DNABERT2, NucleotideTransformer, HyenaDNA, Caduceus, Evo2) 지원하는 통합 코드 개발.

## Progress
- Gene embedding 추출 파이프라인 코드 완성
  - 지원 모델: DNABERT2, NucleotideTransformer, HyenaDNA, Caduceus, Evo2
  - HuggingFace Dataset → 모델별 임베딩 → npy 파일 저장
  - Chunking/stride 기반 긴 시퀀스 처리 지원
  - Mean/Max pooling 옵션 제공
- 중앙 tracking hub (gene-brain) 연동 설정
  - GitHub Actions workflow 추가 (자동 커밋 sync)
  - Daily log publish 스크립트 설정
- 코드 문제점 분석 및 문서화
  - 메모리 관련 이슈 (max_length 제한 필요)
  - 빈 시퀀스 처리 개선 필요

## Challenges
- DNABERT2에서 긴 시퀀스(>512) 처리 시 메모리 부족 발생 → max_length 제한으로 해결
- Flash Attention 호환성 이슈 → `--disable_flash_attn` 옵션 추가
- GPU 메모리 누수 가능성 발견 → torch.cuda.empty_cache() 추가 필요

## Next Steps
- 147개 유전자에 대한 전체 임베딩 추출 실행
- 각 모델별 임베딩 품질 비교
- 메모리 최적화 코드 적용

## Notes
- 권장 설정: DNABERT2 max_length 512 이하, batch_size 조절
- Evo2는 별도 환경 필요 (evo2 패키지 설치)
- 출력 경로: `/embeddings/{Backbone}/{ModelName}/{Gene}/`
